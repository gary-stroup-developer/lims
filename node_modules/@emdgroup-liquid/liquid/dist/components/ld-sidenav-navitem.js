import { HTMLElement, createEvent, h, proxyCustomElement } from '@stencil/core/internal/client';
import { g as getClassNames } from './getClassNames.js';
import { c as closest } from './closest.js';
import { t as toggleStackToTop } from './toggleStackToTop.js';
import { d as defineCustomElement$5 } from './ld-sr-only2.js';
import { d as defineCustomElement$4 } from './ld-tooltip2.js';
import { d as defineCustomElement$3 } from './ld-tooltip-popper2.js';
import { d as defineCustomElement$2 } from './ld-typo2.js';

const ldSidenavNavitemCss = ":host{display:block}.ld-sidenav-navitem{--ld-sidenav-navitem-active-indicator-border-width:0.1875rem;--ld-sidenav-navitem-bg-inset:var(--ld-sp-6);--ld-sidenav-navitem-border-radius:var(--ld-br-l);--ld-sidenav-navitem-height:var(--ld-sp-32);--ld-sidenav-navitem-icon-font-size:1rem;--ld-sidenav-navitem-col:var(--ld-col-neutral-800);--ld-sidenav-navitem-col-active:var(--ld-thm-primary-active);--ld-sidenav-navitem-col-hover:var(--ld-thm-primary);--ld-sidenav-navitem-col-focus:var(--ld-thm-primary);--ld-sidenav-navitem-indicator-col:transparent;--ld-sidenav-navitem-indicator-col-focus:var(--ld-thm-primary-focus);background-color:initial;margin:0 var(--ld-sidenav-padding-x);position:relative;font:var(--ld-typo-body-s);border:0;cursor:pointer;-webkit-user-select:none;user-select:none;touch-action:manipulation;color:var(--ld-sidenav-navitem-col);display:flex;width:calc(100% - var(--ld-sidenav-padding-x)*2);align-items:center;box-sizing:border-box;padding:0;text-align:left;text-decoration:none;outline:none;-webkit-touch-callout:none}.ld-sidenav-navitem:not(.ld-sidenav-navitem--secondary):not(.ld-sidenav-navitem--tertiary){transition:transform var(--ld-sidenav-transition-duration-collapse-expand) var(--ld-sidenav-transition-delay-collapse-expand) ease;transform:translateY(var(--ld-slider-navitem-move-up,0))}.ld-sidenav-navitem.ld-sidenav-navitem--collapsed.ld-sidenav-navitem--secondary,.ld-sidenav-navitem.ld-sidenav-navitem--collapsed.ld-sidenav-navitem--tertiary{transition:visibility 0s calc(var(--ld-sidenav-transition-duration-collapse-expand)*2) linear;visibility:hidden}.ld-sidenav-navitem.ld-sidenav-navitem--collapsed:not(.ld-sidenav-navitem--secondary):not(.ld-sidenav-navitem--tertiary){transition:transform var(--ld-sidenav-transition-duration-collapse-expand) ease}.ld-sidenav-navitem.ld-sidenav-navitem--collapsed .ld-sidenav-navitem__bg{transform:translateX(calc(var(--ld-sidenav-width) - var(--ld-sidenav-width-collapsed)))}.ld-sidenav-navitem--active{--ld-sidenav-navitem-col:var(--ld-thm-primary);font-weight:700}.ld-sidenav-navitem--active .ld-sidenav-navitem__slot-container-icon:before{content:\"\";position:absolute;border:solid var(--ld-sidenav-navitem-active-indicator-border-width) var(--ld-col-wht);border-radius:calc(var(--ld-sidenav-navitem-active-indicator-border-width) + var(--ld-sidenav-navitem-border-radius))}.ld-sidenav-navitem--active .ld-sidenav-navitem__slot-container-icon:after,.ld-sidenav-navitem--active .ld-sidenav-navitem__slot-container-icon:before{top:calc(var(--ld-sidenav-navitem-active-indicator-border-width)*-1);right:calc(var(--ld-sidenav-navitem-active-indicator-border-width)*-1);bottom:calc(var(--ld-sidenav-navitem-active-indicator-border-width)*-1);left:calc(var(--ld-sidenav-navitem-active-indicator-border-width)*-1)}.ld-sidenav-navitem--active .ld-sidenav-navitem__slot-container-icon:after{border-radius:calc(var(--ld-sidenav-navitem-active-indicator-border-width) + var(--ld-sidenav-navitem-border-radius));box-shadow:var(--ld-shadow-sticky)}.ld-sidenav-navitem:active{--ld-sidenav-navitem-col:var(--ld-thm-primary-active)}.ld-sidenav-navitem:active .ld-sidenav-navitem__slot-container-icon:after{box-shadow:var(--ld-shadow-active)}.ld-sidenav-navitem--rounded{--ld-sidenav-navitem-border-radius:calc(var(--ld-sidenav-navitem-icon-size)*0.5)}@media (hover:hover){.ld-sidenav-navitem:where(:hover){--ld-sidenav-navitem-col:var(--ld-sidenav-navitem-col-hover);--ld-sidenav-navitem-indicator-col:var(--ld-col-neutral-300)}.ld-sidenav-navitem:where(:hover) .ld-sidenav-navitem__slot-container-icon:after{box-shadow:var(--ld-shadow-sticky)}}.ld-sidenav-navitem:focus{--ld-sidenav-navitem-col:var(--ld-sidenav-navitem-col-focus);--ld-sidenav-navitem-indicator-col:var(--ld-sidenav-navitem-indicator-col-focus)}.ld-sidenav-navitem:focus .ld-sidenav-navitem__slot-container-icon:after{box-shadow:var(--ld-shadow-sticky)}.ld-sidenav-navitem:focus:active{--ld-sidenav-navitem-col:var(--ld-sidenav-navitem-col-active)}.ld-sidenav-navitem:focus:active .ld-sidenav-navitem__slot-container-icon:after{box-shadow:var(--ld-shadow-active)}.ld-sidenav-navitem--tertiary{margin-left:calc(var(--ld-sidenav-padding-x)*3 + .3125rem);width:calc(100% - var(--ld-sidenav-padding-x)*4 - .3125rem);gap:0}.ld-sidenav-navitem__bg{position:absolute;top:calc(var(--ld-sidenav-navitem-bg-inset)*-1);right:calc(var(--ld-sidenav-navitem-bg-inset)*-1);bottom:calc(var(--ld-sidenav-navitem-bg-inset)*-1);left:calc(var(--ld-sidenav-navitem-bg-inset)*-1);display:block;opacity:.2;transition:opacity var(--ld-sidenav-transition-duration-collapse-expand) var(--ld-sidenav-transition-delay-collapse-expand) linear,transform var(--ld-sidenav-transition-duration-collapse-expand) ease;pointer-events:none}.ld-sidenav-navitem__bg-center,.ld-sidenav-navitem__bg-left,.ld-sidenav-navitem__bg-right{background-color:var(--ld-sidenav-navitem-indicator-col);position:absolute;top:0;bottom:0;transition:transform var(--ld-sidenav-transition-duration-collapse-expand) ease;pointer-events:all}.ld-sidenav-navitem__bg-left,.ld-sidenav-navitem__bg-right{width:calc(var(--ld-sidenav-navitem-icon-size)*0.5 + var(--ld-sp-6))}.ld-sidenav-navitem__bg-left{left:0;border-bottom-left-radius:calc(var(--ld-sidenav-navitem-border-radius) + var(--ld-sp-6));border-top-left-radius:calc(var(--ld-sidenav-navitem-border-radius) + var(--ld-sp-6))}.ld-sidenav-navitem__bg-right{right:0;border-bottom-right-radius:calc(var(--ld-sidenav-navitem-border-radius) + var(--ld-sp-6));border-top-right-radius:calc(var(--ld-sidenav-navitem-border-radius) + var(--ld-sp-6))}.ld-sidenav-navitem--collapsed .ld-sidenav-navitem__bg-right{transform:translateX(calc(var(--ld-sidenav-translate-x-delta)*-1))}.ld-sidenav-navitem__bg-center{left:calc(var(--ld-sidenav-navitem-icon-size)*0.5 + var(--ld-sp-6));right:calc(var(--ld-sidenav-navitem-icon-size)*0.5 + var(--ld-sp-6));transform-origin:left}.ld-sidenav-navitem--collapsed .ld-sidenav-navitem__bg-center{transform:scaleX(0)}.ld-sidenav-navitem__dot,.ld-sidenav-navitem__slot-container,.ld-sidenav-navitem__slot-container-icon{position:relative;z-index:0}.ld-sidenav-navitem__dot{align-self:center;flex-shrink:0;display:none;transition:opacity var(--ld-sidenav-transition-duration-collapse-expand) var(--ld-sidenav-transition-delay-collapse-expand) linear,transform var(--ld-sidenav-transition-duration-collapse-expand) ease}.ld-sidenav-navitem--collapsed .ld-sidenav-navitem__dot{transition:opacity var(--ld-sidenav-transition-duration-collapse-expand) linear,transform var(--ld-sidenav-transition-duration-collapse-expand) ease;opacity:0;transform:translateX(var(--ld-sidenav-translate-x-delta))}.ld-sidenav-navitem--secondary .ld-sidenav-navitem__dot,.ld-sidenav-navitem--tertiary .ld-sidenav-navitem__dot{display:flex;align-items:center;justify-content:center;padding:var(--ld-sp-8) 0}.ld-sidenav-navitem--secondary .ld-sidenav-navitem__dot:before,.ld-sidenav-navitem--tertiary .ld-sidenav-navitem__dot:before{content:\"\";display:block;width:var(--ld-sp-8);aspect-ratio:1;background-color:var(--ld-sidenav-navitem-icon-bg-col,var(--ld-thm-primary));border-radius:var(--ld-br-s)}.ld-sidenav-navitem--rounded.ld-sidenav-navitem--secondary .ld-sidenav-navitem__dot:before,.ld-sidenav-navitem--rounded.ld-sidenav-navitem--tertiary .ld-sidenav-navitem__dot:before{border-radius:var(--ld-br-full)}.ld-sidenav-navitem--secondary .ld-sidenav-navitem__dot{width:var(--ld-sidenav-navitem-icon-size)}.ld-sidenav-navitem--tertiary .ld-sidenav-navitem__dot{width:calc(var(--ld-sidenav-navitem-icon-size) - var(--ld-sp-6))}.ld-sidenav-navitem--tertiary .ld-sidenav-navitem__dot:before{background-color:initial;box-shadow:inset 0 0 0 var(--ld-sp-2) var(--ld-sidenav-navitem-icon-bg-col,var(--ld-thm-primary))}.ld-sidenav-navitem__slot-container-icon{flex-shrink:0;background-color:var(--ld-sidenav-navitem-icon-bg-col,var(--ld-thm-primary));color:var(--ld-col-wht);border-radius:var(--ld-sidenav-navitem-border-radius);display:flex;justify-content:center;align-items:center;width:var(--ld-sidenav-navitem-icon-size);height:var(--ld-sidenav-navitem-icon-size);transition:transform var(--ld-sidenav-transition-duration-collapse-expand) ease;position:relative;z-index:1}.ld-sidenav-navitem--secondary .ld-sidenav-navitem__slot-container-icon,.ld-sidenav-navitem--tertiary .ld-sidenav-navitem__slot-container-icon{display:none}.ld-sidenav-navitem--collapsed .ld-sidenav-navitem__slot-container-icon{transform:translateX(var(--ld-sidenav-translate-x-delta))}.ld-sidenav-navitem__slot-container-icon:after{content:\"\";position:absolute;top:0;right:0;bottom:0;left:0}.ld-sidenav-navitem__slot-container-icon:after,.ld-sidenav-navitem__slot-container-icon>::slotted(*){border-radius:calc(var(--ld-sidenav-navitem-border-radius))}.ld-sidenav-navitem__slot-container-icon>::slotted(*){width:100%;height:100%;transform:scale(1.01)}.ld-sidenav-navitem__tooltip{position:absolute;top:calc(var(--ld-sidenav-navitem-bg-inset)*-1);right:calc(var(--ld-sidenav-navitem-bg-inset)*-1);bottom:calc(var(--ld-sidenav-navitem-bg-inset)*-1);left:calc(var(--ld-sidenav-navitem-bg-inset)*-1);z-index:1}.ld-sidenav-navitem__tooltip-trigger{position:relative;cursor:pointer;width:calc(var(--ld-sidenav-navitem-icon-size) + var(--ld-sidenav-navitem-bg-inset)*2);aspect-ratio:1;border-radius:calc(var(--ld-sidenav-navitem-active-indicator-border-width) + var(--ld-sidenav-navitem-border-radius))}.ld-sidenav-navitem--rounded .ld-sidenav-navitem__tooltip-trigger{border-radius:var(--ld-br-full)}.ld-sidenav-navitem__tooltip-content{position:absolute}.ld-sidenav-navitem__slot-container{-webkit-box-orient:vertical;-webkit-line-clamp:2;display:-webkit-box;margin-left:var(--ld-sp-12);margin-right:auto;max-height:var(--ld-sidenav-navitem-height);text-overflow:ellipsis;line-height:1.15;transition:opacity var(--ld-sidenav-transition-duration-collapse-expand) var(--ld-sidenav-transition-delay-collapse-expand) linear,transform var(--ld-sidenav-transition-duration-collapse-expand) ease;overflow:hidden;padding-right:var(--ld-sp-4)}.ld-sidenav-navitem--collapsed .ld-sidenav-navitem__slot-container{opacity:0;transform:translateX(var(--ld-sidenav-translate-x-delta));transition:opacity var(--ld-sidenav-transition-duration-collapse-expand) linear,transform var(--ld-sidenav-transition-duration-collapse-expand) ease}.ld-sidenav-navitem--secondary .ld-sidenav-navitem__slot-container,.ld-sidenav-navitem--tertiary .ld-sidenav-navitem__slot-container{padding:0}.ld-sidenav-navitem__slot-icon-secondary-container{display:flex;flex-shrink:0;margin-right:var(--ld-sp-4)}.ld-sidenav-navitem__abbr{font:var(--ld-typo-b6);font-size:var(--ld-sidenav-navitem-icon-font-size);transform:translateX(3%) translateY(-14%)}";

let LdSidenavNavitem$1 = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.ldSidenavNavitemTo = createEvent(this, "ldSidenavNavitemTo", 7);
    /** Sets visual indicator to denote that the nav item is currently active. */
    this.active = false;
    /** Applies full border-radius. */
    this.rounded = false;
    this.getabbreviation = () => {
      try {
        const words = this.el.textContent.trim().split(' ');
        const chars = words.length > 1
          ? words.map((s) => s.match(/[a-zA-Z]/)[0])
          : words[0].match(/[a-zA-Z]/g);
        return (chars
          // The M character is twice as wide as other characters in the M-Font.
          .slice(0, chars.some((char) => char.toLowerCase() === 'm') ? 1 : 2)
          .join('')
          .toUpperCase());
      }
      catch (err) {
        return '';
      }
    };
    this.onClick = () => {
      var _a;
      if (this.to) {
        this.ldSidenavNavitemTo.emit({ id: this.to, label: this.el.textContent });
      }
      (_a = this.tooltipRef) === null || _a === void 0 ? void 0 : _a.hideTooltip();
    };
  }
  /**
   * Sets focus on the anchor or button
   */
  async focusInner() {
    var _a;
    (_a = this.focusableElement) === null || _a === void 0 ? void 0 : _a.focus();
  }
  handleSidenavCollapsedChange(ev) {
    var _a;
    if (ev.target !== this.sidenav)
      return;
    this.sidenavCollapsed = ev.detail;
    if (this.sidenav.narrow) {
      toggleStackToTop(this.el, this.sidenavCollapsed);
    }
    (_a = this.tooltipRef) === null || _a === void 0 ? void 0 : _a.hideTooltip();
  }
  handleSidenavBreakpointChange(ev) {
    if (ev.target !== this.sidenav)
      return;
    this.sidenavClosable = ev.detail;
  }
  componentWillLoad() {
    this.sidenav = closest('ld-sidenav', this.el);
    this.sidenavAlignement = this.sidenav.align;
    this.sidenavExpandsOnMouseEnter =
      this.sidenav.expandTrigger === 'mouseenter';
    if (!['secondary', 'tertiary'].includes(this.mode) &&
      !this.el.querySelector('[slot="icon"]')) {
      this.tooltipContent = this.el.textContent.trim();
      this.abbreviation = this.getabbreviation();
    }
  }
  componentDidLoad() {
    // HACK: Due to Safari's buggy line-clamp implementation we need
    //  to trigger a re-render after a certain timeout in order for the
    //  ellipsis to be rendered. In most cases the first timeout is enough
    //  to trigger a re-render in Safari. However, in rare cases we need
    //  to wait a little longer.
    //  A re-render can be triggered by changing certain styles; in our
    //  case we use box-sizing and align-items which otherwhise do not
    //  effect the appearence of the element.
    setTimeout(() => {
      this.slotContainerRef.style.boxSizing = 'border-box';
    });
    setTimeout(() => {
      this.slotContainerRef.style.alignItems = 'center';
    }, 200);
  }
  render() {
    const cl = getClassNames([
      'ld-sidenav-navitem',
      this.active && 'ld-sidenav-navitem--active',
      this.rounded && 'ld-sidenav-navitem--rounded',
      this.mode && `ld-sidenav-navitem--${this.mode}`,
      this.sidenavCollapsed &&
        !this.sidenavClosable &&
        'ld-sidenav-navitem--collapsed',
    ]);
    const Tag = this.href ? 'a' : 'button';
    return (h(Tag, { part: "navitem focusable", class: cl, href: this.href, ref: (el) => (this.focusableElement = el), rel: this.target === '_blank' ? 'noreferrer noopener' : undefined, onClick: this.onClick, "aria-haspopup": this.to ? 'true' : undefined, "aria-expanded": this.to ? 'false' : undefined, tabIndex: this.ldTabindex }, h("div", { class: "ld-sidenav-navitem__bg", part: "bg" }, h("div", { class: "ld-sidenav-navitem__bg-left" }), h("div", { class: "ld-sidenav-navitem__bg-center" }), h("div", { class: "ld-sidenav-navitem__bg-right" })), h("div", { class: "ld-sidenav-navitem__dot", part: "dot" }), h("div", { class: "ld-sidenav-navitem__slot-container-icon", role: "presentation", part: "slot-container-icon" }, h("slot", { name: "icon" }), this.abbreviation && (h("span", { class: "ld-sidenav-navitem__abbr", part: "abbreviation" }, this.abbreviation)), h("ld-tooltip", { "show-delay": "250", tag: "span", ref: (el) => (this.tooltipRef = el), class: "ld-sidenav-navitem__tooltip", disabled: !this.sidenavCollapsed, arrow: true, position: this.sidenavAlignement === 'left' ? 'right middle' : 'left middle' }, h("div", { class: "ld-sidenav-navitem__tooltip-trigger", slot: "trigger", onClick: this.onClick }), h("div", { class: "ld-sidenav-navitem__tooltip-content" }, h("ld-typo", null, this.tooltipContent)))), h("div", { ref: (el) => (this.slotContainerRef = el), class: "ld-sidenav-navitem__slot-container", part: "slot-container" }, h("slot", null)), h("div", { class: "ld-sidenav-navitem__slot-icon-secondary-container" }, h("slot", { name: "icon-secondary" }))));
  }
  get el() { return this; }
  static get style() { return ldSidenavNavitemCss; }
};
LdSidenavNavitem$1 = /*@__PURE__*/ proxyCustomElement(LdSidenavNavitem$1, [1, "ld-sidenav-navitem", {
    "active": [4],
    "href": [1],
    "mode": [1],
    "rounded": [4],
    "ldTabindex": [2, "ld-tabindex"],
    "target": [1],
    "to": [513],
    "tooltipContent": [32],
    "abbreviation": [32],
    "sidenavAlignement": [32],
    "sidenavClosable": [32],
    "sidenavCollapsed": [32],
    "sidenavExpandsOnMouseEnter": [32],
    "focusInner": [64]
  }, [[9, "ldSidenavCollapsedChange", "handleSidenavCollapsedChange"], [9, "ldSidenavBreakpointChange", "handleSidenavBreakpointChange"]]]);
function defineCustomElement$1() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["ld-sidenav-navitem", "ld-sr-only", "ld-tooltip", "ld-tooltip-popper", "ld-typo"];
  components.forEach(tagName => { switch (tagName) {
    case "ld-sidenav-navitem":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, LdSidenavNavitem$1);
      }
      break;
    case "ld-sr-only":
      if (!customElements.get(tagName)) {
        defineCustomElement$5();
      }
      break;
    case "ld-tooltip":
      if (!customElements.get(tagName)) {
        defineCustomElement$4();
      }
      break;
    case "ld-tooltip-popper":
      if (!customElements.get(tagName)) {
        defineCustomElement$3();
      }
      break;
    case "ld-typo":
      if (!customElements.get(tagName)) {
        defineCustomElement$2();
      }
      break;
  } });
}
defineCustomElement$1();

const LdSidenavNavitem = LdSidenavNavitem$1;
const defineCustomElement = defineCustomElement$1;

export { LdSidenavNavitem, defineCustomElement };
